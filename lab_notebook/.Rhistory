bod <- c(7, 10, 5, 9, 2, 6, 1, 12, 8, 3, 11, 4)
vialT0 <- c(3, 39, 26, 40, 2, 32, 21, 13, 7, 4, 10, 11)
vialTF <- c(19, 33, 18, 12, 22, 24, 15, 31, 20, 37, 6, 36)
temp <- 25.5
# pressure was not recorded at the time of the sampling, so it was retrieved from the Wunderground climate archive
pressure <- 767
# only the beginnig and end time were recorded for this run, so the times were calcuated by divding the difference by the number of samples and assuming all the samples took approximately the same time. We didn't take breaks, so this is going to be pretty close.
time0 <- c(2015-09-22 12:42, 2015-09-22 12:47, 2015-09-22 12:53, 2015-09-22 12:58. 2015-09-22 13:04, 2015-09-22 13:09, 2015-09-22 13:15, 2015-09-22 13:20, 2015-09-22 13:26, 2015-09-22 13:31, 2015-09-22 13:37, 2015-09-22 13:47)
BeginBuretT0 <- c(2.20, 2.75, 3.4, 4.0, 5.255, 4.7, 6.00, 6.75, 7.35, 8.00, 8.75, 7.00)
EndBuretT0 <- c(2.75, 3.4, 4.0, 4.7, 6.00, 5.255, 6.75, 7.35, 8.00, 8.75, 9.35, 7.755)
timeF <- c(2015-09-22 19:45, 2015-09-22 19:47, 2015-09-22 19:44, 2015-09-22 19:42. 2015-09-22 19:40, 2015-09-22 19:35, 2015-09-22 20;01, 2015-09-22 19:59, 2015-09-22 19:54, 2015-09-22 19:57, 2015-09-22 19:52, 2015-09-22 19:49)
BeginBuretTF <- c(4.70, 5.30, 4.025, 3.30, 2.40, 1.65, 7.25, 6.50, 7.625, 8.30, 6.70, 5.90)
EndBuretTF <- c(5.30, 5.90, 4.70, 4.025, 3.30, 2.40, 8.15, 7.25, 8.30, 9.20, 7.625, 6.70)
A <- rep(0.0028, 12)
Replvol <- c(35, 37, 35, 37, 36, 35, 35, 35, 35, 36, 36, 37)
RmeasT0 <- EndBuretT0 - BeginBuretT0
RmeasTF <- EndBuretTF - BeginBuretTF
temp <- rep(25.5, 12)
pressure <- rep(767, 12)
time0 <- c("2015-09-22 12:42", "2015-09-22 12:47", "2015-09-22 12:53", "2015-09-22 12:58", "2015-09-22 13:04", "2015-09-22 13:09", "2015-09-22 13:15", "2015-09-22 13:20", "2015-09-22 13:26", "2015-09-22 13:31", "2015-09-22 13:37", "2015-09-22 13:47")
timeF <- c("2015-09-22 19:45", "2015-09-22 19:47", "2015-09-22 19:44", "2015-09-22 19:42", "2015-09-22 19:40", "2015-09-22 19:35", "2015-09-22 20:01", "2015-09-22 19:59", "2015-09-22 19:54", "2015-09-22 19:57", "2015-09-22 19:52", "2015-09-22 19:49")
sod <- data.frame(bod, vialT0, vialTF, temp, pressure, A, time0, timeF, RmeasT0, RmeasTF, Replvol)
setwd("~/current_research/CPOM_Flux/lab_notebook")
write.table(sod, "data/leached_litter_sod_22sept2015.csv", sep = ",", rownames = F, quote = F)
write.table(sod, "data/leached_litter_sod_22sept2015.csv", sep = ",", row.names = F, quote = F)
std.begin.buret <- c(0.00, 0.25, 0.55)
std.end.buret <- c(0.25, 0.40, 0.75)
blank.begin1 <- c(0.75, 1.85)
blank.end1 <- c(0.95, 2.05)
blank.begin2 <- c(0.95, 2.05)
blank.end2 <- c(1.155, 2.20)
Vstd <- 0.2
MnCl.vol <- 0.085
NaI.vol <- 0.085
Nstd <- 0.01
E <- 5598
MnCl.DO <- 0.018
stds <- std.end.buret - std.begin.buret
blank.first <- blank.end1 - blank.begin1
blank.second <- blank.first + (blank.end2 - blank.begin2)
Rstd <- mean(stds)
blank.second.vol <- blank.second - blank.first
Rblk <- mean(blank.first - blank.second.vol)
Vreg <- sum(MnCl.vol, NaI.vol)
DOreg <- MnCl.DO * MnCl.vol
std <- data.frame(Rstd, Rblk, Vstd, Nstd, E, Vreg, DOreg)
write.table(std, file = "./data/winkler_standardization_22sept2015.csv", quote = F, row.names = F, sep = ",")
date <- c("2015-09-22", "2015-09-22")
vial <- c(29, 17)
BeginBuret <- c(7.755, 8.40)
EndBuret <- c(8.40, 8.95)
Rmeas <- EndBuret - BeginBuret
date <- c("2015-09-22", "2015-09-22")
vial <- c(29, 17)
BeginBuret <- c(7.755, 8.40)
EndBuret <- c(8.40, 8.95)
Rmeas <- EndBuret - BeginBuret
repl <- data.frame(date, vial, Rmeas)
write.table(repl, "./data/repl_water_22sept2015.csv", quote = F, row.names = F, sep = ",")
sod <- read.delim("./data/leached_litter_sod_22sept2015.csv", header = T, sep = ",")
std <- read.delim("./data/winkler_standardization_22sept2015.csv", header = T,  sep = ",")
repl <- read.delim("./data/repl_water_22sept2015.csv", header = T,  sep = ",")
vial <- read.delim("./data/vial_volume_summer_2014.csv", header = T,  sep = ",")
sodT0 <- merge(sod, vial, by.x = "vialT0", by.y = "vial")
DOvol.T0 <- (((sod$RmeasT0 - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (sodT0$vol - std$Vreg))) - std$DOreg
bod <- 1:12
treat <- c("L", "L", "L", "L", "LS", "LS", "LS", "S", "S", "LS", "S", "S")
treat <- data.frame(bod, treat)
write.table(treat, "./data/leached_litter_treatments.csv", quote = F, row.names = F, sep = ",")
write.table(treat, "./data/leached_litter_treatments_fall2015.csv", quote = F, row.names = F, sep = ",")
sod <- read.delim("./data/leached_litter_sod_22sept2015.csv", header = T, sep = ",")
std <- read.delim("./data/winkler_standardization_22sept2015.csv", header = T,  sep = ",")
repl <- read.delim("./data/repl_water_22sept2015.csv", header = T,  sep = ",")
vial <- read.delim("./data/vial_volume_summer_2014.csv", header = T,  sep = ",")
treat <- read.delim("./data/leached_litter_treatments_fall2015.csv", header = T, sep = ",")
sodT0 <- merge(sod, vial, by.x = "vialT0", by.y = "vial")
sodT0 <- merge(sodT0, bod, by.x = "bod", by.y = "bod")
sodT0 <- merge(sodT0, treat, by.x = "bod", by.y = "bod")
DOvol.T0 <- (((sod$RmeasT0 - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (sodT0$vol - std$Vreg))) - std$DOreg
sodTF <- merge(sod, vial, by.x = "vialTF", by.y = "vial")
sod <- read.delim("./data/leached_litter_sod_22sept2015.csv", header = T, sep = ",")
std <- read.delim("./data/winkler_standardization_22sept2015.csv", header = T,  sep = ",")
repl <- read.delim("./data/repl_water_22sept2015.csv", header = T,  sep = ",")
vial <- read.delim("./data/vial_volume_summer_2014.csv", header = T,  sep = ",")
treat <- read.delim("./data/leached_litter_treatments_fall2015.csv", header = T, sep = ",")
## Add treatments to sod data.frame for T0
sod <- merge(sod, treat, by.x = "bod", by.y = "bod")
# DO Calculations
## Add vial vial volumes to the sod data.frame for T0
sodT0 <- merge(sod, vial, by.x = "vialT0", by.y = "vial")
## Calculation of [DO] of T0 samples
DOvol.T0 <- (((sod$RmeasT0 - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (sodT0$vol - std$Vreg))) - std$DOreg
plot(DOvol.T0 ~ sod$treat)
plot(DOvol.T0 ~ as.numeric(sod$treat))
sodTF <- merge(sod, vial, by.x = "vialTF", by.y = "vial")
## Calculation of [DO] of TF samples
DOvol.TF <- (((sod$RmeasTF - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (sodTF$vol - std$Vreg))) - std$DOreg
plot(DOvol.TF ~ as.numeric(sod$treat))
repl <- merge(repl, vial, by.x = "vial", by.y = "vial")
replDOvol <- (((repl$Rmeas - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (repl$vol - std$Vreg))) - std$DOreg
## Convert from ml/L to mmol/L
R <- 0.08205746 # ideal gas constant in (L atm)/(mol K)
T <- sod$temp + 273.15 # convert C to K
P <- sod$pressure * 0.03342 # convert in Hg to atm
DOmmol.T0 <- (P * DOvol.T0) / (R * T)
DOmmol.TF <- (P * DOvol.TF) / (R * T)
replDOmmol <- (P * replDOvol0) / (R * T)
replDOvol <- (((repl$Rmeas - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (repl$vol - std$Vreg))) - std$DOreg
replDOmmol <- (P * replDOvol) / (R * T)
meanReplDOvol <- mean(replDOvol)
meanReplDOmmol <- mean(replDOmmol)
DO.T0 <- (DOmmol.T0 * (1 - (sod$Replvol / sod$BODwatervol))) + (meanReplDOmmol * (sod$Replvol / sod$BODwatervol))
DOmmol.bot.T0 <- DO.T0 * (sod$BODwatervol / 1000) # converting bottle volume from ml to L
DOmmol.bot.TF <- DOmmol.TF * (sod$BODwatervol / 1000) # converting bottle volume from ml to L
dDO <- DOmmol.bot.T0 - DOmmol.bot.TF
mmolO2.m2 <- dDO / sod$A
t0 <- as.POSIXlt(sod$time0)
tF <- as.POSIXlt(sod$timeF)
incubation.h <- tF - t0
incubation.h <- as.numeric(incubation.h)
## Normalize by hours of incubation
mmolO2.m2.h <- mmolO2.m2 / incubation.h
## Make data frame of relevant variables
plot(mmolO2.m2.h ~ sod$treat)
mmolO2.m2 <- dDO / sod$A
dDO <- DOmmol.bot.T0 - DOmmol.bot.TF
BODwatervol <- 200
DO.T0 <- (DOmmol.T0 * (1 - (sod$Replvol / BODwatervol))) + (meanReplDOmmol * (sod$Replvol / BODwatervol))
DOmmol.bot.TF <- DOmmol.TF * (BODwatervol / 1000) # converting bottle volume from ml to L
DOmmol.bot.T0 <- DO.T0 * (BODwatervol / 1000) # converting bottle volume from ml to L
plot(mmolO2.m2.h ~ sod$treat)
DOmmol.bot.T0 <- DO.T0 * (BODwatervol / 1000) # converting bottle volume from ml to L
DOmmol.bot.TF <- DOmmol.TF * (BODwatervol / 1000) # converting bottle volume from ml to L
dDO <- DOmmol.bot.T0 - DOmmol.bot.TF
plot(dDO ~ treat)
plot(dDO ~ sod$treat)
plot(DOmmol.T0 ~ sod$treat)
plot(DOmmol.TF ~ sod$treat)
plot(DOmmol.TF, DOmmol.T0)
boxplot(DOmmol.TF, DOmmol.T0)
boxplot(DOmmol.TF, DOmmol.T0)
plot(DOmmol.T0 ~ sod$treat, ylim = c(0, 10))
plot(DOmmol.T0 ~ sod$treat, ylim = c(0, 6))
summary(lm(DOmmol.T0 ~ sod$treat))
anova(lm(DOmmol.T0 ~ sod$treat))
TukeyHSD(aov(DOmmol.T0 ~ sod$treat))
write.table(DO.conc, "./data/leached_litter_DOconc_22sept2015.csv", row.names = F, quote = F, sep = ",")
DO.conc <- (sod, DOmmol.TO, DOmmol.TF)
DO.conc <- data.frame(sod, DOmmol.TO, DOmmol.TF)
## write a data table of the concentration data
write.table(DO.conc, "./data/leached_litter_DOconc_22sept2015.csv", row.names = F, quote = F, sep = ",")
DO.conc <- data.frame(sod, DOmmol.TO, DOmmol.TF)
DO.conc <- data.frame(sod, DOmmol.T0, DOmmol.TF)
## write a data table of the concentration data
write.table(DO.conc, "./data/leached_litter_DOconc_22sept2015.csv", row.names = F, quote = F, sep = ",")
DO.conc <- data.frame(sod$bod, sod$treat, DOmmol.T0, DOmmol.TF)
## write a data table of the concentration data
write.table(DO.conc, "./data/leached_litter_DOconc_22sept2015.csv", row.names = F, quote = F, sep = ",")
