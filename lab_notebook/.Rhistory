sod <- read.delim("./data/leached_litter_sod_22oct2015.csv", header = T, sep = ",")
setwd("~/current_research/CPOM_Flux/lab_notebook")
sod <- read.delim("./data/leached_litter_sod_22oct2015.csv", header = T, sep = ",")
std.22oct2015 <- read.delim("./data/winkler_standardization_22oct2015.csv", header = T,  sep = ",")
std.23oct2015 <- read.delim("./data/winkler_standardization_23oct2015.csv", header = T,  sep = ",")
vial <- read.delim("./data/vial_volume_summer_2014.csv", header = T,  sep = ",")
treat <- read.delim("./data/leached_litter_treatments_fall2015.csv", header = T, sep = ",")
repl <- read.delim("./data/repl_water_22oct2015.csv", header = T, sep = ",")
BODwatervol <- 200
###Calculations
## Add treatments to sod data.frame for T0
sod <- merge(sod, treat, by = "bod" )
# DO Calculations
## Add vial vial volumes to the sod data.frame for T0
sodT0 <- merge(sod, vial, by.x = "vialT0", by.y = "vial")
## Calculation of [DO] of T0 samples
DOvol.T0 <- (((sod$RmeasT0 - std.22oct2015$Rblk) * std.22oct2015$Vstd * std.22oct2015$Nstd * std.22oct2015$E) / ((std.22oct2015$Rstd - std.22oct2015$Rblk) * (sodT0$vol - std.22oct2015$Vreg))) - std.22oct2015$DOreg
## Add vial vial volumes to the sod data.dframe for T1
sodTF <- merge(sod, vial, by.x = "vialTF", by.y = "vial")
## Calculation of [DO] of TF samples
DOvol.TF <- (((sod$RmeasTF - std.23oct2015$Rblk) * std.23oct2015$Vstd * std.23oct2015$Nstd * std.23oct2015$E) / ((std.23oct2015$Rstd - std.23oct2015$Rblk) * (sodTF$vol - std.23oct2015$Vreg))) - std.23oct2015$DOreg
## Calculation of the [DO] of the replacement water
replDOvol <- (((repl$Rmeas - std.23oct2015$Rblk) * std.23oct2015$Vstd * std.23oct2015$Nstd * std.23oct2015$E) / ((std.23oct2015$Rstd - std.23oct2015$Rblk) * (sodTF$vol - std.23oct2015$Vreg))) - std.23oct2015$DOreg
## Convert from ml/L to mmol/L
R <- 0.08205746 # ideal gas constant in (L atm)/(mol K)
T <- sod$temp + 273.15 # convert C to K
P <- sod$pressure * 0.03342 # convert in Hg to atm
DOmmol.T0 <- (P * DOvol.T0) / (R * T)
DOmmol.TF <- (P * DOvol.TF) / (R * T)
# Make a data.frame with just the concentration data
DO.conc <- data.frame(sod$bod, sod$treat, DOmmol.T0, DOmmol.TF)
## write a data table of the concentration data
##write.table(DO.conc, "./data/leached_litter_DOconc_08oct2015.csv", row.names = F, quote = F, sep = ",")
# SOD Calculations
replDOmmol <- (P * replDOvol) / (R * T)
## Calculate the mean replacement water [DO]
meanReplDOmmol <- mean(replDOmmol)
## Calculation of T0 DO concentration
DO.T0 <- (DOmmol.T0 * (1 - (sod$Replvol / BODwatervol))) + (meanReplDOmmol * (sod$Replvol / BODwatervol))
## Calculation of mmols of oxygen in the bottles
DOmmol.bot.T0 <- DO.T0 * (BODwatervol / 1000) # converting bottle volume from ml to L
DOmmol.bot.TF <- DOmmol.TF * (BODwatervol / 1000) # converting bottle volume from ml to L
## Calculation of change in mmol DO during incubation
dDO <- DOmmol.bot.T0 - DOmmol.bot.TF
## Normalize by sediment area --> convert to per m2
mmolO2.m2 <- dDO / sod$A
## Convert times to POSIXlt standard
t0 <- as.POSIXlt(sod$time0)
tF <- as.POSIXlt(sod$timeF)
## Calculate the incubation hours
incubation.h <- tF - t0
incubation.h <- as.numeric(incubation.h)
## Normalize by hours of incubation
mmolO2.m2.h <- mmolO2.m2 / incubation.h
## Make data frame of relevant variables
flux <- data.frame(sodTF$bod, sodTF$treat, sodTF$temp, dDO, DOmmol.T0, DOmmol.TF, DO.T0, incubation.h, mmolO2.m2.h)
names(flux) <- c("bod", "treatment", "temp", "dDO", "DOpre", "DOpost", "DO.T0", "incubation.h", "SOD")
boxplot(DOmmol.bot.T0, DOmmol.bot.TF)
boxplot(DOmmol.bot.T0, DOmmol.bot.TF, ylim = c(0, 0.1)
)
plot(DOmmol.bot.TF ~ treat)
treat
plot(DOmmol.bot.TF ~ treat, data = sodTF)
plot(DOmmol.bot.T0 ~ treat, data = sodTF)
boxplot(DOmmol.bot.T0, DOmmol.bot.TF, ylim = c(0, 0.1))
plot(DOmmol.bot.TF ~ treat, data = sodTF)
plot(SOD ~ treatment, data = flux)
plot(DOpre ~ treatment, data = flux)
plot(DOpost ~ treatment, data = flux)
plot(DOpost[DOpost > 0] ~ treatment, data = flux)
plot(DOpost[DOpost > 0] ~ treatment[DOpost > 0], data = flux)
plot(DOpre ~ treatment, data = flux)
summary(flux$DOpre)
summary(flux$DOpost)
summary(flux$DOpost[DOpost > 0])
summary(flux$DOpost[flux$DOpost > 0])
plot(DOpost[DOpost > 0] * 32 ~ treatment[DOpost > 0], data = flux)
plot(DOpre * 32 ~ treatment, data = flux)
plot(SOD * 32 ~ treatment, data = flux)
plot(SOD * 32 ~ treatment, data = flux, ylim = c(0, 10))
plot(SOD * 32 ~ treatment, data = flux, ylim = c(0, 20))
plot(SOD * 32 ~ treatment, data = flux, ylim = c(0, 50))
plot(DOpre * 32 ~ treatment, data = flux)
replDOmmol *32
repl
summary(flux$SOD)
summary(flux$SOD)
hist(flux$SOD)
boxplot(flux$sod)
boxplot(flux$SOD)
stem(flux$SOD)
stem(mmolO2.m2.h)
