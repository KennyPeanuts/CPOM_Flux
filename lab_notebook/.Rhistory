setwd("~/current_research/CPOM_Flux/lab_notebook")
std.begin.buret <- c(0.00, 0.20, 0.35)
std.end.buret <- c(0.20, 0.35, 0.55)
blank.begin1 <- c(0.55, 0.90, 1.30)
blank.end1 <- c(0.725, 1.10, 1.50)
blank.begin2 <- c(0.725, 1.10, 1.50)
blank.end2 <- c(0.90, 1.30, 1.65)
Vstd <- 0.2
MnCl.vol <- 0.085
NaI.vol <- 0.085
Nstd <- 0.01
E <- 5598
MnCl.DO <- 0.018
### Calculations
stds <- std.end.buret - std.begin.buret
blank.first <- blank.end1 - blank.begin1
blank.second <- blank.first + (blank.end2 - blank.begin2)
Rstd <- mean(stds)
blank.second.vol <- blank.second - blank.first
Rblk <- mean(blank.first - blank.second.vol)
Vreg <- sum(MnCl.vol, NaI.vol)
DOreg <- MnCl.DO * MnCl.vol
## Output
std <- data.frame(Rstd, Rblk, Vstd, Nstd, E, Vreg, DOreg)
write.table(std, file = "./data/winkler_standardization_23sept2015.csv", quote = F, row.names = F, sep = ",")
sod <- read.delim("./data/leached_litter_sod_22sept2015.csv", header = T, sep = ",")
std.22sept2015 <- read.delim("./data/winkler_standardization_22sept2015.csv", header = T,  sep = ",")
std.23sept2015 <- read.delim("./data/winkler_standardization_23sept2015.csv", header = T,  sep = ",")
repl <- read.delim("./data/repl_water_22sept2015.csv", header = T,  sep = ",")
vial <- read.delim("./data/vial_volume_summer_2014.csv", header = T,  sep = ",")
treat <- read.delim("./data/leached_litter_treatments_fall2015.csv", header = T, sep = ",")
## Add treatments to sod data.frame for T0
sod <- merge(sod, treat, by.x = "bod", by.y = "bod")
# DO Calculations
## Add vial vial volumes to the sod data.frame for T0
sodT0 <- merge(sod, vial, by.x = "vialT0", by.y = "vial")
## Calculation of [DO] of T0 samples
DOvol.T0 <- (((sod$RmeasT0 - std.22sept2015$Rblk) * std.22sept2015$Vstd * std.22sept2015$Nstd * std.22sept2015$E) / ((std.22sept2015$Rstd - std.22sept2015$Rblk) * (sodT0$vol - std.22sept2015$Vreg))) - std.22sept2015$DOreg
## Add vial vial volumes to the sod data.dframe for T1
sodTF <- merge(sod, vial, by.x = "vialTF", by.y = "vial")
## Calculation of [DO] of TF samples
DOvol.TF <- (((sod$RmeasTF - std.23sept2015$Rblk) * std.23sept2015$Vstd * std.23sept2015$Nstd * std.23sept2015$E) / ((std.23sept2015$Rstd - std.23sept2015$Rblk) * (sodTF$vol - std.23sept2015$Vreg))) - std.23sept2015$DOreg
## Add vial vial volumes to the sod data.dframe for T1
repl <- merge(repl, vial, by.x = "vial", by.y = "vial")
## Calculation of replacement water [DO]
replDOvol <- (((repl$Rmeas - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (repl$vol - std$Vreg))) - std$DOreg
## Convert from ml/L to mmol/L
R <- 0.08205746 # ideal gas constant in (L atm)/(mol K)
T <- sod$temp + 273.15 # convert C to K
P <- sod$pressure * 0.03342 # convert in Hg to atm
DOmmol.T0 <- (P * DOvol.T0) / (R * T)
DOmmol.TF <- (P * DOvol.TF) / (R * T)
boxplot(DOmmol.T0, DOmmol.TF)
boxplot(DOmmol.T0, DOmmol.TF, ylim = c(0, 10))
