7 + 121
7 + 12
bod <- c(5, 1, 6, 7, 2, 8, 4, 10, 9, 3)
vialT0 <- 1:10
vialTF <- 15:24
temp <- rep(22.0, 10)
pressure <- rep(30.24, 10)
time0 <- c("2016-02-11 09:30", "2016-02-11 09:36", "2016-02-11 09:40", "2016-02-11 09:45", "2016-02-11 09:50", "2016-02-11 09:55", "2016-02-11 09:58", "2016-02-11 10:03", "2016-02-11 10:09", "2016-02-11 10:13")
BeginBuretT0 <- c(0.00, 0.80, 1.60, 2.50, 3.30, 4.10, 5.10, 6.00, 6.85, 7.65)
EndBuretT0 <- c(0.80, 1.60, 2.50, 3.30, 4.10, 5.10, 6.00, 6.80, 7.65, 8.45)
timeF <- c("2016-02-11 19:55", "2016-02-11 20:00", "2016-02-11 20:04", "2016-02-11 20:06", "2016-02-11 20:10", "2016-02-11 20:13", "2016-02-11 20:15", "2016-02-11 20:18", "2016-02-11 20:10", "2016-02-11 20:24")
BeginBuretTF <- c(3.35, 4.05, 4.75, 5.375, 6.00, 6.65, 7.275, 7.90, 8.575, 9.15)
EndBuretTF <- c(4.00, 4.70, 5.375, 6.00, 6.65, 7.275, 7.90, 8.575, 9.15, 9.725)
A <- rep(0.0028, 10)
Replvol <- c(55, 53, 54, 46, 53, 53, 54, 53, 55, 54)
RmeasT0 <- EndBuretT0 - BeginBuretT0
RmeasTF <- EndBuretTF - BeginBuretTF
# create data.frame
sod <- data.frame(bod, vialT0, vialTF, temp, pressure, A, time0, timeF, RmeasT0, RmeasTF, Replvol)
## Output File
write.table(sod, "data/leached_litter_SP_sod_11feb2016.csv", sep = ",", row.names = F, quote = F)
setwd("~/current_research")
setwd("~/current_research/CPOM_Flux/lab_notebook")
write.table(sod, "data/leached_litter_SP_sod_11feb2016.csv", sep = ",", row.names = F, quote = F)
std.begin.buret <- c(0.00, 0.20, 0.375)
std.end.buret <- c(0.20, 0.375, 0.60)
blank.begin1 <- c(0.60, 0.90, 1.25)
blank.end1 <- c(0.75, 1.05, 1.45)
blank.begin2 <- c(0.75, 1.05, 1.45)
blank.end2 <- c(0.90, 1.25, 1.575)
Vstd <- 0.2
MnCl.vol <- 0.085
NaI.vol <- 0.085
Nstd <- 0.01
E <- 5598
MnCl.DO <- 0.018
### Calculations
stds <- std.end.buret - std.begin.buret
blank.first <- blank.end1 - blank.begin1
blank.second <- blank.first + (blank.end2 - blank.begin2)
Rstd <- mean(stds)
blank.second.vol <- blank.second - blank.first
Rblk <- mean(blank.first - blank.second.vol)
Vreg <- sum(MnCl.vol, NaI.vol)
DOreg <- MnCl.DO * MnCl.vol
std <- data.frame(Rstd, Rblk, Vstd, Nstd, E, Vreg, DOreg)
write.table(std, file = "./data/winkler_standardization_11feb2016.csv", quote = F, row.names = F, sep = ",")
date <- rep("2016-02-11", 4)
vial <- c(11:14)
BeginBuret <- c(8.45, 0.00, 1.10, 2.25)
EndBuret <- c(9.50, 1.10, 2.25, 3.35)
Rmeas <- EndBuret - BeginBuret
## Output
repl <- data.frame(date, vial, Rmeas)
# replace date with date of run
write.table(repl, "./data/repl_water_11feb2016.csv", quote = F, row.names = F, sep = ",")
bod <- 1:10
treat <- c("LS", "LS", "S", "LS", "S", "S", "LS", "LS", "S", "S")
treat <- data.frame(bod, treat)
write.table(treat, "./data/leached_litter_treatments_Spring2016.csv", quote = F, row.names = F, sep = ",")
sod <- read.delim("./data/leached_litter_sod_11feb2016.csv", header = T, sep = ",")
sod <- read.delim("./data/leached_litter_SP_sod_11feb2016.csv", header = T, sep = ",")
std <- read.delim("./data/winkler_standardization_11feb2016.csv", header = T,  sep = ",")
vial <- read.delim("./data/vial_volume_summer_2014.csv", header = T,  sep = ",")
treat <- read.delim("./data/leached_litter_treatments_Spring2016.csv", header = T, sep = ",")
repl <- read.delim("./data/repl_water_11feb2016.csv", header = T, sep = ",")
BODwatervol <- 200
sod <- merge(sod, treat, by = "bod" )
sodT0 <- merge(sod, vial, by.x = "vialT0", by.y = "vial")
DOvol.T0 <- (((sod$RmeasT0 - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (sodT0$vol - std$Vreg))) - std$DOreg
sodTF <- merge(sod, vial, by.x = "vialTF", by.y = "vial")
DOvol.TF <- (((sod$RmeasTF - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (sodTF$vol - std$Vreg))) - std$DOreg
replDOvol <- (((repl$Rmeas - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (sodTF$vol - std$Vreg))) - std$DOreg
replDOvol <- (((repl$Rmeas - std$Rblk) * std$Vstd * std$Nstd * std$E) / ((std$Rstd - std$Rblk) * (sodTF$vol - std$Vreg))) - std$DOreg
## Convert from ml/L to mmol/L
R <- 0.08205746 # ideal gas constant in (L atm)/(mol K)
T <- sod$temp + 273.15 # convert C to K
P <- sod$pressure * 0.03342 # convert in Hg to atm
DOmmol.T0 <- (P * DOvol.T0) / (R * T)
DOmmol.TF <- (P * DOvol.TF) / (R * T)
replDOmmol <- (P * replDOvol) / (R * T)
meanReplDOmmol <- mean(replDOmmol)
DO.T0 <- (DOmmol.T0 * (1 - (sod$Replvol / BODwatervol))) + (meanReplDOmmol * (sod$Replvol / BODwatervol))
DOmmol.bot.T0 <- DO.T0 * (BODwatervol / 1000) # converting bottle volume from ml to L
DOmmol.bot.TF <- DOmmol.TF * (BODwatervol / 1000) # converting bottle volume from ml to L
dDO <- DOmmol.bot.T0 - DOmmol.bot.TF
mmolO2.m2 <- dDO / sod$A
t0 <- as.POSIXlt(sod$time0)
tF <- as.POSIXlt(sod$timeF)
incubation.h <- tF - t0
incubation.h <- as.numeric(incubation.h)
mmolO2.m2.h <- mmolO2.m2 / incubation.h
flux <- data.frame(sodTF$bod, sodTF$treat, sodTF$temp, dDO, DOmmol.T0, DOmmol.TF, DO.T0, incubation.h, mmolO2.m2.h)
names(flux) <- c("bod", "treatment", "temp", "dDO", "DOpre", "DOpost", "DO.T0", "incubation.h", "SOD")
plot(SOD ~ treatment, data = flux)
plot(SOD ~ as.numeric(treatment), data = flux)
plot(SOD ~ as.numeric(treatment), data = flux, ylim = c(0, 1))
plot(SOD ~ jitter(as.numeric(treatment), 5), data = flux, ylim = c(0, 1))
plot(SOD ~ jitter(as.numeric(treatment), 1), data = flux, ylim = c(0, 1))
plot(SOD ~ jitter(as.numeric(treatment), 0.5), data = flux, ylim = c(0, 1))
write.table(flux, "./data/leached_litter_sp_sod_calculation_11feb2016.csv", quote = F, row.names = F, sep = ",")
plot(flux$DOpre)
summary(flux$DOpre)
summary(flux$DOpost)
