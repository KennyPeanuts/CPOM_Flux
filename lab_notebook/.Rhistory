nut <- read.table("./data/CPOM_Flux_Nutrients.csv", header = T, sep = ",")
getwd()
list.files()
getwd()
setwd("/Volumes/Seagate Backup Plus Drive/working_files/current_research/CPOM_Flux/lab_notebook/")
nut <- read.table("./data/CPOM_Flux_Nutrients.csv", header = T, sep = ",")
NOx.flux.12Jun.C <-  nut$NOx[nut$BOD != "RW0" & nut$DATE == "12-Jun" & nut$NUTS == "0"] - nut$NOx[nut$BOD == "RW0" & nut$DATE == "10-Jun"]
NH3.flux.12Jun.C <-  nut$NH3[nut$BOD != "RW0" & nut$DATE == "12-Jun" & nut$NUTS == "0"] - nut$NH3[nut$BOD == "RW0" & nut$DATE == "10-Jun"]
P.flux.12Jun.C <-  nut$P[nut$BOD != "RW0" & nut$DATE == "12-Jun" & nut$NUTS == "0"] - nut$P[nut$BOD == "RW0" & nut$DATE == "10-Jun"]
CPOM.0 <- nut$CPOM[nut$BOD != "RW0" & nut$DATE == "12-Jun" & nut$NUTS == "0"]
flux.12Jun.C <- data.frame(CPOM.0, NOx.flux.12Jun.C, NH3.flux.12Jun.C, P.flux.12Jun.C )
names(flux.12Jun.C) <- c("CPOM", "NOx", "NH3", "P")
sod.12Jun <- read.table("./data/cpom_flux_sod_12jun2014.csv", header = T, sep = ",")
repl.vol <- sod.12Jun[, c(1, 13, 14)] # selects only the BOD number and the repl vol from the file
names(repl.vol) <- c("BOD", "Replvol", "BODwatervol")
nut.12Jun <- merge(nut[nut$DATE == "12-Jun", ], repl.vol, by = "BOD")
prop.repl <- nut.12Jun$Replvol / nut.12Jun$BODwatervol
init.NOx.17Jun.C <- (nut.12Jun$NOx[nut.12Jun$NUTS == "0"] * (1 - prop.repl[nut.12Jun$NUTS == "0"])) + (nut$NOx[nut$BOD == "RW0" & nut$DATE == "12-Jun"] * prop.repl[nut.12Jun$NUTS == "0"])
init.NH3.17Jun.C <- (nut.12Jun$NH3[nut.12Jun$NUTS == "0"] * (1 - prop.repl[nut.12Jun$NUTS == "0"])) + (nut$NH3[nut$BOD == "RW0" & nut$DATE == "12-Jun"] * prop.repl[nut.12Jun$NUTS == "0"])
init.P.17Jun.C <- (nut.12Jun$P[nut.12Jun$NUTS == "0"] * (1 - prop.repl[nut.12Jun$NUTS == "0"])) + (nut$P[nut$BOD == "RW0" & nut$DATE == "12-Jun"] * prop.repl[nut.12Jun$NUTS == "0"])
flux.NOx.17Jun.C <- nut$NOx[nut$BOD != "RW0" & nut$DATE == "17-Jun" & nut$NUTS == "0"] - init.NOx.17Jun.C
flux.NH3.17Jun.C <- nut$NH3[nut$BOD != "RW0" & nut$DATE == "17-Jun" & nut$NUTS == "0"] - init.NH3.17Jun.C
flux.P.17Jun.C <- nut$P[nut$BOD != "RW0" & nut$DATE == "17-Jun" & nut$NUTS == "0"] - init.P.17Jun.C
CPOM.C <- nut$CPOM[nut$BOD != "RW0" & nut$DATE == "17-Jun" & nut$NUTS == "0"]
flux.17Jun.C <- data.frame(CPOM.C, flux.NOx.17Jun.C, flux.NH3.17Jun.C, flux.P.17Jun.C)
names(flux.17Jun.C) <- c("CPOM", "NOx", "NH3", "P")
sod.17Jun <- read.table("./data/cpom_flux_sod_17jun2014.csv", header = T, sep = ",")
repl.vol <- sod.17Jun[, c(1, 13, 14)] # selects only the BOD number and the repl vol from the file
names(repl.vol) <- c("BOD", "Replvol", "BODwatervol")
nut.17Jun <- merge(nut[nut$DATE == "17-Jun", ], repl.vol, by = "BOD")
prop.repl <- nut.17Jun$Replvol / nut.17Jun$BODwatervol
init.NOx.24Jun.C <- (nut.17Jun$NOx[nut.17Jun$NUTS == "0"] * (1 - prop.repl[nut.17Jun$NUTS == "0"])) + (nut$NOx[nut$BOD == "RW0" & nut$DATE == "17-Jun"] * prop.repl[nut.17Jun$NUTS == "0"])
init.NH3.24Jun.C <- (nut.17Jun$NH3[nut.17Jun$NUTS == "0"] * (1 - prop.repl[nut.17Jun$NUTS == "0"])) + (nut$NH3[nut$BOD == "RW0" & nut$DATE == "17-Jun"] * prop.repl[nut.17Jun$NUTS == "0"])
init.P.24Jun.C <- (nut.17Jun$P[nut.17Jun$NUTS == "0"] * (1 - prop.repl[nut.17Jun$NUTS == "0"])) + (nut$P[nut$BOD == "RW0" & nut$DATE == "17-Jun"] * prop.repl[nut.17Jun$NUTS == "0"])
flux.NOx.24Jun.C <- nut$NOx[nut$BOD != "RW0" & nut$DATE == "24-Jun" & nut$NUTS == "0"] - init.NOx.24Jun.C
flux.NH3.24Jun.C <- nut$NH3[nut$BOD != "RW0" & nut$DATE == "24-Jun" & nut$NUTS == "0"] - init.NH3.24Jun.C
flux.P.24Jun.C <- nut$P[nut$BOD != "RW0" & nut$DATE == "24-Jun" & nut$NUTS == "0"] - init.P.24Jun.C
CPOM.C <- nut$CPOM[nut$BOD != "RW0" & nut$DATE == "24-Jun" & nut$NUTS == "0"]
flux.24Jun.C <- data.frame(CPOM.C, flux.NOx.24Jun.C, flux.NH3.24Jun.C, flux.P.24Jun.C)
names(flux.24Jun.C) <- c("CPOM", "NOx", "NH3", "P")
sod.24Jun <- read.table("./data/cpom_flux_sod_24jun2014.csv", header = T, sep = ",")
repl.vol <- sod.24Jun[, c(1, 13, 14)] # selects only the BOD number and the repl vol from the file
names(repl.vol) <- c("BOD", "Replvol", "BODwatervol")
nut.24Jun <- merge(nut[nut$DATE == "24-Jun", ], repl.vol, by = "BOD")
prop.repl <- nut.24Jun$Replvol / nut.24Jun$BODwatervol
init.NOx.1Jul.C <- (nut.24Jun$NOx[nut.24Jun$NUTS == 0] * (1 - prop.repl[nut.24Jun$NUTS == "0"])) + (nut$NOx[nut$BOD == "RW0" & nut$DATE == "24-Jun"] * prop.repl[nut.24Jun$NUTS == "0"])
init.NH3.1Jul.C <- (nut.24Jun$NH3[nut.24Jun$NUTS == 0] * (1 - prop.repl[nut.24Jun$NUTS == "0"])) + (nut$NH3[nut$BOD == "RW0" & nut$DATE == "24-Jun"] * prop.repl[nut.24Jun$NUTS == "0"])
init.P.1Jul.C <- (nut.24Jun$P[nut.24Jun$NUTS == 0] * (1 - prop.repl[nut.24Jun$NUTS == "0"])) + (nut$P[nut$BOD == "RW0" & nut$DATE == "24-Jun"] * prop.repl[nut.24Jun$NUTS == "0"])
flux.NOx.1Jul.C <- nut$NOx[nut$BOD != "RW0" & nut$DATE == "1-Jul" & nut$NUTS == "0"] - init.NOx.1Jul.C
flux.NH3.1Jul.C <- nut$NH3[nut$BOD != "RW0" & nut$DATE == "1-Jul" & nut$NUTS == "0"] - init.NH3.1Jul.C
flux.P.1Jul.C <- nut$P[nut$BOD != "RW0" & nut$DATE == "1-Jul" & nut$NUTS == "0"] - init.P.1Jul.C
CPOM.C <- nut$CPOM[nut$BOD != "RW0" & nut$DATE == "1-Jul" & nut$NUTS == "0"]
flux.1Jul.C <- data.frame(CPOM.C, flux.NOx.1Jul.C, flux.NH3.1Jul.C, flux.P.1Jul.C)
names(flux.1Jul.C) <- c("CPOM", "NOx", "NH3", "P")
NOx.flux.12Jun.N <-  nut$NOx[nut$BOD != "RWN" & nut$DATE == "12-Jun" & nut$NUTS == "N"] - nut$NOx[nut$BOD == "RWN" & nut$DATE == "10-Jun"]
NH3.flux.12Jun.N <-  nut$NH3[nut$BOD != "RWN" & nut$DATE == "12-Jun" & nut$NUTS == "N"] - nut$NH3[nut$BOD == "RWN" & nut$DATE == "10-Jun"]
P.flux.12Jun.N <-  nut$P[nut$BOD != "RWN" & nut$DATE == "12-Jun" & nut$NUTS == "N"] - nut$P[nut$BOD == "RWN" & nut$DATE == "10-Jun"]
CPOM.N <- nut$CPOM[nut$BOD != "RWN" & nut$DATE == "12-Jun" & nut$NUTS == "N"]
flux.12Jun.N <- data.frame(CPOM.N, NOx.flux.12Jun.N, NH3.flux.12Jun.N, P.flux.12Jun.N )
names(flux.12Jun.N) <- c("CPOM", "NOx", "NH3", "P")
sod.12Jun <- read.table("./data/cpom_flux_sod_12jun2014.csv", header = T, sep = ",")
repl.vol <- sod.12Jun[, c(1, 13, 14)] # selects only the BOD number and the repl vol from the file
names(repl.vol) <- c("BOD", "Replvol", "BODwatervol")
nut.12Jun <- merge(nut[nut$DATE == "12-Jun", ], repl.vol, by = "BOD")
prop.repl <- nut.12Jun$Replvol / nut.12Jun$BODwatervol
init.NOx.17Jun.N <- (nut.12Jun$NOx[nut.12Jun$NUTS == "N"] * (1 - prop.repl[nut.12Jun$NUTS == "N"])) + (nut$NOx[nut$BOD == "RWN" & nut$DATE == "12-Jun"] * prop.repl[nut.12Jun$NUTS == "N"])
init.NH3.17Jun.N <- (nut.12Jun$NH3[nut.12Jun$NUTS == "N"] * (1 - prop.repl[nut.12Jun$NUTS == "N"])) + (nut$NH3[nut$BOD == "RWN" & nut$DATE == "12-Jun"] * prop.repl[nut.12Jun$NUTS == "N"])
init.P.17Jun.N <- (nut.12Jun$P[nut.12Jun$NUTS == "N"] * (1 - prop.repl[nut.12Jun$NUTS == "N"])) + (nut$P[nut$BOD == "RWN" & nut$DATE == "12-Jun"] * prop.repl[nut.12Jun$NUTS == "N"])
flux.NOx.17Jun.N <- nut$NOx[nut$BOD != "RWN" & nut$DATE == "17-Jun" & nut$NUTS == "N"] - init.NOx.17Jun.N
flux.NH3.17Jun.N <- nut$NH3[nut$BOD != "RWN" & nut$DATE == "17-Jun" & nut$NUTS == "N"] - init.NH3.17Jun.N
flux.P.17Jun.N <- nut$P[nut$BOD != "RWN" & nut$DATE == "17-Jun" & nut$NUTS == "N"] - init.P.17Jun.N
CPOM.N <- nut$CPOM[nut$BOD != "RWN" & nut$DATE == "17-Jun" & nut$NUTS == "N"]
flux.17Jun.N <- data.frame(CPOM.N, flux.NOx.17Jun.N, flux.NH3.17Jun.N, flux.P.17Jun.N)
names(flux.17Jun.N) <- c("CPOM", "NOx", "NH3", "P")
sod.17Jun <- read.table("./data/cpom_flux_sod_17jun2014.csv", header = T, sep = ",")
repl.vol <- sod.17Jun[, c(1, 13, 14)] # selects only the BOD number and the repl vol from the file
names(repl.vol) <- c("BOD", "Replvol", "BODwatervol")
nut.17Jun <- merge(nut[nut$DATE == "17-Jun", ], repl.vol, by = "BOD")
prop.repl <- nut.17Jun$Replvol / nut.17Jun$BODwatervol
init.NOx.24Jun.N <- (nut.17Jun$NOx[nut.17Jun$NUTS == "N"] * (1 - prop.repl[nut.17Jun$NUTS == "N"])) + (nut$NOx[nut$BOD == "RWN" & nut$DATE == "17-Jun"] * prop.repl[nut.17Jun$NUTS == "N"])
init.NH3.24Jun.N <- (nut.17Jun$NH3[nut.17Jun$NUTS == "N"] * (1 - prop.repl[nut.17Jun$NUTS == "N"])) + (nut$NH3[nut$BOD == "RWN" & nut$DATE == "17-Jun"] * prop.repl[nut.17Jun$NUTS == "N"])
init.P.24Jun.N <- (nut.17Jun$P[nut.17Jun$NUTS == "N"] * (1 - prop.repl[nut.17Jun$NUTS == "N"])) + (nut$P[nut$BOD == "RWN" & nut$DATE == "17-Jun"] * prop.repl[nut.17Jun$NUTS == "N"])
flux.NOx.24Jun.N <- nut$NOx[nut$BOD != "RWN" & nut$DATE == "24-Jun" & nut$NUTS == "N"] - init.NOx.24Jun.N
flux.NH3.24Jun.N <- nut$NH3[nut$BOD != "RWN" & nut$DATE == "24-Jun" & nut$NUTS == "N"] - init.NH3.24Jun.N
flux.P.24Jun.N <- nut$P[nut$BOD != "RWN" & nut$DATE == "24-Jun" & nut$NUTS == "N"] - init.P.24Jun.N
CPOM.N <- nut$CPOM[nut$BOD != "RWN" & nut$DATE == "24-Jun" & nut$NUTS == "N"]
flux.24Jun.N <- data.frame(CPOM.N, flux.NOx.24Jun.N, flux.NH3.24Jun.N, flux.P.24Jun.N)
names(flux.24Jun.N) <- c("CPOM", "NOx", "NH3", "P")
sod.24Jun <- read.table("./data/cpom_flux_sod_24jun2014.csv", header = T, sep = ",")
repl.vol <- sod.24Jun[, c(1, 13, 14)] # selects only the BOD number and the repl vol from the file
names(repl.vol) <- c("BOD", "Replvol", "BODwatervol")
nut.24Jun <- merge(nut[nut$DATE == "24-Jun", ], repl.vol, by = "BOD")
prop.repl <- nut.24Jun$Replvol / nut.24Jun$BODwatervol
init.NOx.1Jul.N <- (nut.24Jun$NOx[nut.24Jun$NUTS == "N"] * (1 - prop.repl[nut.24Jun$NUTS == "N"])) + (nut$NOx[nut$BOD == "RWN" & nut$DATE == "24-Jun"] * prop.repl[nut.24Jun$NUTS == "N"])
init.NH3.1Jul.N <- (nut.24Jun$NH3[nut.24Jun$NUTS == "N"] * (1 - prop.repl[nut.24Jun$NUTS == "N"])) + (nut$NH3[nut$BOD == "RWN" & nut$DATE == "24-Jun"] * prop.repl[nut.24Jun$NUTS == "N"])
init.P.1Jul.N <- (nut.24Jun$P[nut.24Jun$NUTS == "N"] * (1 - prop.repl[nut.24Jun$NUTS == "N"])) + (nut$P[nut$BOD == "RWN" & nut$DATE == "24-Jun"] * prop.repl[nut.24Jun$NUTS == "N"])
flux.NOx.1Jul.N <- nut$NOx[nut$BOD != "RWN" & nut$DATE == "1-Jul" & nut$NUTS == "N"] - init.NOx.1Jul.N
flux.NH3.1Jul.N <- nut$NH3[nut$BOD != "RWN" & nut$DATE == "1-Jul" & nut$NUTS == "N"] - init.NH3.1Jul.N
flux.P.1Jul.N <- nut$P[nut$BOD != "RWN" & nut$DATE == "1-Jul" & nut$NUTS == "N"] - init.P.1Jul.N
CPOM.N <- nut$CPOM[nut$BOD != "RWN" & nut$DATE == "1-Jul" & nut$NUTS == "N"]
flux.1Jul.N <- data.frame(CPOM.N, flux.NOx.1Jul.N, flux.NH3.1Jul.N, flux.P.1Jul.N)
names(flux.1Jul.N) <- c("CPOM", "NOx", "NH3", "P")
DATE <- c(rep("12-Jun", 16), rep("17-Jun", 16), rep("24-Jun", 16), rep("1-Jul", 16))
days <- c(rep(2, 16), rep(7, 16), rep(14, 16), rep(21, 16)) # number of days since set up
days.elap <- c(rep(2, 16), rep(5, 16), rep(7, 16), rep(7, 16)) # number of days since t-1
NUT <- c(rep(c(rep("0", 8), rep("N", 8)), 4))
flux.samp <- rbind(flux.12Jun.C, flux.12Jun.N, flux.17Jun.C, flux.17Jun.N, flux.24Jun.C, flux.24Jun.N, flux.1Jul.C, flux.1Jul.N)
flux.day <- flux.samp[,-1]/days.elap # removed the `CPOM` variable from the data and normalize by days
flux <- (flux.day * .185) / 0.003525652
cpom.flux.nut <- data.frame(DATE, days, NUT, flux.samp[,1], flux)
names(cpom.flux.nut) <- c("DATE", "days", "NUT", "CPOM", "NOx", "NH3", "P")
write.table(cpom.flux.nut, "./data/CPOM_Flux_Nutrient_Flux_calc.csv", row.names = F, quote = F, sep = ",")
str(cpom.flux.nut)
plot(NOx ~ days, data = cpom.flux.nut)
abline(h = 0)
rm(list = ls())
nut <- read.table("./data/CPOM_Flux_Nutrient_Flux_calc.csv", header = T, sep = ",")
summary(nut$NOx)
summary(nut$NOx[nut$NUT == 0])
summary(nut$NOx[nut$NUT == N])
summary(nut$NOx[nut$NUT == "N"])
summary(nut$NOx[nut$CPOM == "0"])
summary(nut$NOx[nut$CPOM == "C"])
summary(nut$NH3)
summary(nut$NH3[nut$NUT == "0"])
summary(nut$NH3[nut$NUT == "N"])
summary(nut$NH3[nut$CPOM == "0"])
summary(nut$NH3[nut$CPOM == "C"])
summary(nut$P)
summary(nut$P[nut$NUT == "0"])
summary(nut$P[nut$NUT == "N"])
summary(nut$P[nut$CPOM == "0"])
summary(nut$P[nut$CPOM == "C"])
?tapply
table(nut$NOx)
tapply(nut$NOx, nut$NUT & nut$CPOM, mean)
tapply(nut$NOx, nut$NUT, mean)
summary(nut$NOx[nut$NUT == "0" & nut$CPOM == "0"])
?aov
summary(aov(NOx ~ CPOM*NUT, data = nut))
summary(aov(NOx ~ CPOM*NUT*day, data = nut))
summary(aov(NOx ~ CPOM*NUT*days, data = nut))
summary(aov(NOx ~ CPOM*NUT + Error(NUT/days), data = nut))
summary(aov(NOx ~ CPOM*NUT + Error(CPOM/days), data = nut))
rm(list = ls())
clear()
samp <- c("blank", "L", "H", "blank", "L", "H")
no-A <- c(1988.49, 43195.17, 428082.53, 1982.33, 41861.96, 435117.65)
no.A <- c(1988.49, 43195.17, 428082.53, 1982.33, 41861.96, 435117.65)
A <- c(NA, 25703.12, 244058.78, 1858.96, 24543.47, 239473.45)
fl <- data.frame(samp, no.A, A)
fl
chl <- c(0, 20.3, 200, 0, 20.3, 200)
fl <- data.frame(samp, chl, no.A, A)
plot(chl ~ no.A)
fl
summary(lm(chl ~ no.A, data = fl))
summary(lm(chl ~ A, data = fl))
plot(chl ~ A)
abline(lm(chl ~ A)
)
points(chl ~ no.A, col = 4)
abline(lm(chl~no.A, col = 4))
abline(lm(chl~no.A), col = 4))
abline(lm(chl~no.A), col = 4)
q()
q()
n
