setwd("/Volumes/Seagate Backup Plus Drive/working_files/current_research/CPOM_Flux/lab_notebook")
spec10 <- read.table("./data/cpom_flux_spec_10jun2014.csv", header = T, sep = ",")
spec12 <- read.table("./data/cpom_flux_spec_12jun2014.csv", header = T, sep = ",")
spec17 <- read.table("./data/cpom_flux_spec_17jun2014.csv", header = T, sep = ",")
spec24 <- read.table("./data/cpom_flux_spec_24jun2014.csv", header = T, sep = ",")
spec01 <- read.table("./data/cpom_flux_spec_1jul2014.csv", header = T, sep = ",")
sod10 <- read.table("./data/cpom_flux_sod_10jun2014.csv", header = T, sep = ",") # imported to get treatment assignments to bod IDs
spec.all <- rbind(spec10, spec12, spec17, spec24, spec01)
day <- c(rep("2014-06-10", length(spec10$bod)), rep("2014-06-12", length(spec12$bod)), rep("2014-06-17", length(spec17$bod)), rep("2014-06-24", length(spec24$bod)), rep("2014-07-01", length(spec01$bod)))
spec.tot <- data.frame(day, spec.all)
treat <- sod10[, c(1, 4, 5)] # selects for the relevant colums from the sod data.frame
spec <- merge(treat, spec.tot, by.x = "bod", by.y = "bod")
E2E3 <- spec$abs[spec$wl == 250] / spec$abs[spec$wl == 365]
bod250 <- spec$bod[spec$wl == 250]
CPOM250 <- spec$CPOM[spec$wl == 250]
Nutrient250 <- spec$Nutrient[spec$wl == 250]
day250 <- spec$day[spec$wl == 254]
E2E3 <- data.frame(bod250, day250, CPOM250, Nutrient250, E2E3bs)
E2E3 <- data.frame(bod250, day250, CPOM250, Nutrient250, E2E3.abs)
E2E3.abs <- spec$abs[spec$wl == 250] / spec$abs[spec$wl == 365]
bod250 <- spec$bod[spec$wl == 250]
CPOM250 <- spec$CPOM[spec$wl == 250]
Nutrient250 <- spec$Nutrient[spec$wl == 250]
day250 <- spec$day[spec$wl == 254]
E2E3 <- data.frame(bod250, day250, CPOM250, Nutrient250, E2E3.abs)
names(E2E3) <- c("bod", "day", "CPOM", "nutrient", "E2E3")
names(E2E3) <- c("bod", "day", "CPOM", "nutrient", "E2E3")
elapsed.d <- c(rep(0, 5), rep(2, 5), rep(7, 5), rep(14, 5), rep(21, 5))
elapsed10 <- as.numeric(difftime(E2E3$day[E2E3$day == "2014-06-10"], E2E3$day[E2E3$day == "2014-06-10"], units = "days"))
elapsed12 <- as.numeric(difftime(E2E3$day[E2E3$day == "2014-06-12"], E2E3$day[E2E3$day == "2014-06-10"], units = "days"))
elapsed17 <- as.numeric(difftime(E2E3$day[E2E3$day == "2014-06-17"], E2E3$day[E2E3$day == "2014-06-10"], units = "days"))
elapsed24 <- as.numeric(difftime(E2E3$day[E2E3$day == "2014-06-24"], E2E3$day[E2E3$day == "2014-06-10"], units = "days"))
elapsed01 <- as.numeric(difftime(E2E3$day[E2E3$day == "2014-07-01"], E2E3$day[E2E3$day == "2014-06-10"], units = "days"))
elapsed.d <- c(elapsed10, elapsed12, elapsed17, elapsed24, elapsed01)
E2E3 <- data.frame(ratio254[order(as.Date(ratio254$day)), ], elapsed.d)
E2E3 <- data.frame(E2E3[order(as.Date(E2E3$day)), ], elapsed.d)
E2E3
write.table(E2E2, "./data/CPOM_Flux_E2E3.csv", quote = F, row.names = F, sep = ",")
write.table(E2E3, "./data/CPOM_Flux_E2E3.csv", quote = F, row.names = F, sep = ",")
E4E6.abs <- spec$abs[spec$wl == 465] / spec$abs[spec$wl == 665]
E.ratios <- data.frame(E2E3[order(as.Date(E2E3$day)), ], elapsed.d, E4E6[order(as.Date(E2E3$day)), ])
E.ratios <- data.frame(E2E3[order(as.Date(E2E3$day)), ], elapsed.d, E4E6.abs[order(as.Date(E2E3$day)), ])
length(E4E6.abs)
E4E6
E4E6.abs
E2E3.abs
spec$abs[spec$wl == 465]
spec$abs[spec$wl == 665]
a <- (spec.all$abs * 2.303) / 0.01
spec.a <- data.frame(spec.all, a)
spec.tot <- data.frame(day, spec.a)
treat <- sod10[, c(1, 4, 5)] # selects for the relevant colums from the sod data.frame
spec <- merge(treat, spec.tot, by.x = "bod", by.y = "bod")
E2E3.a <- spec$a[spec$wl == 250] / spec$a[spec$wl == 365]
spec10 <- read.table("./data/cpom_flux_spec_10jun2014.csv", header = T, sep = ",")
spec12 <- read.table("./data/cpom_flux_spec_12jun2014.csv", header = T, sep = ",")
spec17 <- read.table("./data/cpom_flux_spec_17jun2014.csv", header = T, sep = ",")
spec24 <- read.table("./data/cpom_flux_spec_24jun2014.csv", header = T, sep = ",")
spec01 <- read.table("./data/cpom_flux_spec_1jul2014.csv", header = T, sep = ",")
sod10 <- read.table("./data/cpom_flux_sod_10jun2014.csv", header = T, sep = ",") # imported to get treatment assignments to bod IDs
## Combine dates
spec.all <- rbind(spec10, spec12, spec17, spec24, spec01)
To convert the absorbance to absorbance coefficients I am using
> a = 2.303 A / l
Where:
* a = the absorbance coefficient (m^(-1))
* A = the absorbance from the spec
* l = the path length (m), in this case `0.01 m`
a <- (spec.all$abs * 2.303) / 0.01
Add a to the data frame
spec.a <- data.frame(spec.all, a)
#### make date list
day <- c(rep("2014-06-10", length(spec10$bod)), rep("2014-06-12", length(spec12$bod)), rep("2014-06-17", length(spec17$bod)), rep("2014-06-24", length(spec24$bod)), rep("2014-07-01", length(spec01$bod)))
spec.tot <- data.frame(day, spec.a)
### Merge with treatments
treat <- sod10[, c(1, 4, 5)] # selects for the relevant colums from the sod data.frame
spec <- merge(treat, spec.tot, by.x = "bod", by.y = "bod")
## Data Analysis
E2E3.a <- spec$a[spec$wl == 250] / spec$a[spec$wl == 365]
bod250 <- spec$bod[spec$wl == 250]
CPOM250 <- spec$CPOM[spec$wl == 250]
Nutrient250 <- spec$Nutrient[spec$wl == 250]
day250 <- spec$day[spec$wl == 254]
E2E3 <- data.frame(bod250, day250, CPOM250, Nutrient250, E2E3.a)
names(E2E3) <- c("bod", "day", "CPOM", "nutrient", "E2E3")
E4E6.a <- spec$a[spec$wl == 465] / spec$a[spec$wl == 665]
elapsed10 <- as.numeric(difftime(E2E3$day[E2E3$day == "2014-06-10"], E2E3$day[E2E3$day == "2014-06-10"], units = "days"))
elapsed12 <- as.numeric(difftime(E2E3$day[E2E3$day == "2014-06-12"], E2E3$day[E2E3$day == "2014-06-10"], units = "days"))
elapsed17 <- as.numeric(difftime(E2E3$day[E2E3$day == "2014-06-17"], E2E3$day[E2E3$day == "2014-06-10"], units = "days"))
elapsed24 <- as.numeric(difftime(E2E3$day[E2E3$day == "2014-06-24"], E2E3$day[E2E3$day == "2014-06-10"], units = "days"))
elapsed01 <- as.numeric(difftime(E2E3$day[E2E3$day == "2014-07-01"], E2E3$day[E2E3$day == "2014-06-10"], units = "days"))
elapsed.d <- c(elapsed10, elapsed12, elapsed17, elapsed24, elapsed01)
E.ratios <- data.frame(E2E3[order(as.Date(E2E3$day)), ], elapsed.d, E4E6.a[order(as.Date(E2E3$day)), ])
E4E6
E4E6.a
