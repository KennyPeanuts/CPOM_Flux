ll.do.22Sept <- read.table("./data/leached_litter_DOconc_22Sept2015.csv", header = T, sep = ",")
setwd("~/current_research/CPOM_Flux/lab_notebook")
ll.do.22Sept <- read.table("./data/leached_litter_DOconc_22Sept2015.csv", header = T, sep = ",")
ll.do.1oct <- read.table("./data/leached_litter_DOconc_1Oct2015.csv", header = T, sep = ",")
ll.do.22Sept <- read.table("./data/leached_litter_DOconc_22sept2015.csv", header = T, sep = ",")
ll.do.1oct <- read.table("./data/leached_litter_DOconc_1oct2015.csv", header = T, sep = ",")
ll.do.1oct <- read.table("./data/leached_litter_DOconc_01oct2015.csv", header = T, sep = ",")
ll.do.8oct <- read.table("./data/leached_litter_DOconc_08oct2015.csv", header = T, sep = ",")
sod <- read.delim("./data/leached_litter_sod_22oct2015.csv", header = T, sep = ",")
std.22oct2015 <- read.delim("./data/winkler_standardization_22oct2015.csv", header = T,  sep = ",")
std.23oct2015 <- read.delim("./data/winkler_standardization_23oct2015.csv", header = T,  sep = ",")
vial <- read.delim("./data/vial_volume_summer_2014.csv", header = T,  sep = ",")
treat <- read.delim("./data/leached_litter_treatments_fall2015.csv", header = T, sep = ",")
repl <- read.delim("./data/repl_water_22oct2015.csv", header = T, sep = ",")
BODwatervol <- 200
sod <- merge(sod, treat, by = "bod" )
sodT0 <- merge(sod, vial, by.x = "vialT0", by.y = "vial")
DOvol.T0 <- (((sod$RmeasT0 - std.22oct2015$Rblk) * std.22oct2015$Vstd * std.22oct2015$Nstd * std.22oct2015$E) / ((std.22oct2015$Rstd - std.22oct2015$Rblk) * (sodT0$vol - std.22oct2015$Vreg))) - std.22oct2015$DOreg
sodTF <- merge(sod, vial, by.x = "vialTF", by.y = "vial")
DOvol.TF <- (((sod$RmeasTF - std.23oct2015$Rblk) * std.23oct2015$Vstd * std.23oct2015$Nstd * std.23oct2015$E) / ((std.23oct2015$Rstd - std.23oct2015$Rblk) * (sodTF$vol - std.23oct2015$Vreg))) - std.23oct2015$DOreg
replDOvol <- (((repl$Rmeas - std.23oct2015$Rblk) * std.23oct2015$Vstd * std.23oct2015$Nstd * std.23oct2015$E) / ((std.23oct2015$Rstd - std.23oct2015$Rblk) * (sodTF$vol - std.23oct2015$Vreg))) - std.23oct2015$DOreg
R <- 0.08205746 # ideal gas constant in (L atm)/(mol K)
T <- sod$temp + 273.15 # convert C to K
P <- sod$pressure * 0.03342 # convert in Hg to atm
DOmmol.T0 <- (P * DOvol.T0) / (R * T)
DOmmol.TF <- (P * DOvol.TF) / (R * T)
DO.conc <- data.frame(sod$bod, sod$treat, DOmmol.T0, DOmmol.TF)
##write.table(DO.conc, "./data/leached_litter_DOconc_22oct2015.csv", row.names = F, quote = F, sep = ",")
write.table(DO.conc, "./data/leached_litter_DOconc_22oct2015.csv", row.names = F, quote = F, sep = ",")
ll.do.22oct <- read.table("./data/leached_litter_DOconc_22oct2015.csv", header = T, sep = ",")
ll.do.22Sept <- read.table("./data/leached_litter_DOconc_22sept2015.csv", header = T, sep = ",")
ll.do.1oct <- read.table("./data/leached_litter_DOconc_01oct2015.csv", header = T, sep = ",")
ll.do.8oct <- read.table("./data/leached_litter_DOconc_08oct2015.csv", header = T, sep = ",")
ll.do.22oct <- read.table("./data/leached_litter_DOconc_22oct2015.csv", header = T, sep = ",")
ll.do.22sept <- read.table("./data/leached_litter_DOconc_22sept2015.csv", header = T, sep = ",")
ll.do.22sept <- read.table("./data/leached_litter_DOconc_22sept2015.csv", header = T, sep = ",")
ll.do.1oct <- read.table("./data/leached_litter_DOconc_01oct2015.csv", header = T, sep = ",")
ll.do.8oct <- read.table("./data/leached_litter_DOconc_08oct2015.csv", header = T, sep = ",")
ll.do.22oct <- read.table("./data/leached_litter_DOconc_22oct2015.csv", header = T, sep = ",")
### Combine into a single dataset
sod <- rbind(ll.do.22sept, ll.do.1oct, ll.do.8oct, ll.do.22oct)
ll.do.8oct
date <- c(rep("2016-09-22", 12), rep("2016-10-01", 12), rep("2016-10-08", 12), rep("2016-10-22", 12))
bod <- c(11, 6, 8, 3, 7, 2, 9, 5, 10, 4, 12, 1)
vialT0 <- c(37, 6, 7, 20, 36, 15, 21, 10, 18, 39, 40, 12)
vialTF <- c(19, 29, 26, 33, 32, 3, 24, 31, 2, 4, 11, 13)
temp <- rep(24.5, 12)
# pressure was not recorded at the time of the sampling, so it was retrieved from the Wunderground climate archive
pressure <- rep(767, 12)
time0 <- c("2015-09-24 09:22", "2015-09-24 09:24", "2015-09-24 09:40", "2015-09-24 09:44", "2015-09-24 09:52", "2015-09-24 09:59", "2015-09-24 10:02", "2015-09-24 10:11", "2015-09-24 10:20", "2015-09-24 10:25", "2015-09-24 10:32", "2015-09-24 10:38")
BeginBuretT0 <- c(1.40, 2.10, 2.80, 3.45, 4.15, 4.80, 5.45, 6.10, 6.75, 7.35, 8.05, 8.75)
EndBuretT0 <- c(2.10, 2.80, 3.45, 4.15, 4.80, 5.45, 6.10, 6.75, 7.35, 8.05, 8.75, 9.45)
timeF <- c("2015-09-22 16:15", "2015-09-22 16:17", "2015-09-22 16:19", "2015-09-22 16:20", "2015-09-22 16:24", "2015-09-22 16:26", "2015-09-22 16:28", "2015-09-22 16:29", "2015-09-22 16:32", "2015-09-22 16:33", "2015-09-22 16:35", "2015-09-22 16:38")
BeginBuretTF <- c(1.50, 2.20, 3.00, 3.60, 4.40, 5.15, 6.025, 6.25, 7.625, 8.35, 6.50, 7.20)
EndBuretTF <- c(2.20, 3.00, 3.60, 4.40, 5.15, 6.025, 6.25, 7.625, 8.35, 9.10, 7.20, 8.05)
A <- rep(0.0028, 12)
Replvol <- c(39, 54, 36, 37, 37, 36, 35, 37, 36, 37, 37, 37)
RmeasT0 <- EndBuretT0 - BeginBuretT0
RmeasTF <- EndBuretTF - BeginBuretTF
# create data.frame
sod <- data.frame(bod, vialT0, vialTF, temp, pressure, A, time0, timeF, RmeasT0, RmeasTF, Replvol)
write.table(sod, "data/leached_litter_sod_24sept2015.csv", sep = ",", row.names = F, quote = F)
std.begin.buret <- c(0.00, 0.20, 0.30)
std.end.buret <- c(0.20, 0.30, 0.525)
blank.begin1 <- c(0.70, 1.05)
blank.end1 <- c(0.90, 1.25)
blank.begin2 <- c(0.90, 1.25)
blank.end2 <- c(1.05, 1.40)
Vstd <- 0.2
MnCl.vol <- 0.085
NaI.vol <- 0.085
Nstd <- 0.01
E <- 5598
MnCl.DO <- 0.018
stds <- std.end.buret - std.begin.buret
blank.first <- blank.end1 - blank.begin1
blank.second <- blank.first + (blank.end2 - blank.begin2)
Rstd <- mean(stds)
blank.second.vol <- blank.second - blank.first
Rblk <- mean(blank.first - blank.second.vol)
Vreg <- sum(MnCl.vol, NaI.vol)
DOreg <- MnCl.DO * MnCl.vol
std <- data.frame(Rstd, Rblk, Vstd, Nstd, E, Vreg, DOreg)
write.table(std, file = "./data/winkler_standardization_24sept2015.csv", quote = F, row.names = F, sep = ",")
std.begin.buret <- c(0.00, 0.15, 0.35)
std.end.buret <- c(0.15, 0.35, 0.525)
blank.begin1 <- c(0.525, 0.90, 1.20)
blank.end1 <- c(0.65, 1.05, 1.35)
blank.begin2 <- c(0.65, 1.05, 1.35)
blank.end2 <- c(0.90, 1.20, 1.50)
Vstd <- 0.2
MnCl.vol <- 0.085
NaI.vol <- 0.085
Nstd <- 0.01
E <- 5598
MnCl.DO <- 0.018
### Calculations
stds <- std.end.buret - std.begin.buret
blank.first <- blank.end1 - blank.begin1
blank.second <- blank.first + (blank.end2 - blank.begin2)
Rstd <- mean(stds)
blank.second.vol <- blank.second - blank.first
Rblk <- mean(blank.first - blank.second.vol)
Vreg <- sum(MnCl.vol, NaI.vol)
DOreg <- MnCl.DO * MnCl.vol
## Output
std <- data.frame(Rstd, Rblk, Vstd, Nstd, E, Vreg, DOreg)
write.table(std, file = "./data/winkler_standardization_25sept2015.csv", quote = F, row.names = F, sep = ",")
std.begin.buret <- c(0.15, 0.35, 0.55)
std.end.buret <- c(0.35, 0.55, 0.65)
blank.begin1 <- c(0.65, 1.45, 1.75, 2.20)
blank.end1 <- c(1.10, 1.65, 2.05, 2.45)
blank.begin2 <- c(1.10, 1.65, 2.05, 2.45)
blank.end2 <- c(1.25, 1.75, 2.20, 2.60)
Vstd <- 0.2
MnCl.vol <- 0.085
NaI.vol <- 0.085
Nstd <- 0.01
E <- 5598
MnCl.DO <- 0.018
### Calculations
stds <- std.end.buret - std.begin.buret
blank.first <- blank.end1 - blank.begin1
blank.second <- blank.first + (blank.end2 - blank.begin2)
Rstd <- mean(stds)
blank.second.vol <- blank.second - blank.first
Rblk <- mean(blank.first - blank.second.vol)
Vreg <- sum(MnCl.vol, NaI.vol)
DOreg <- MnCl.DO * MnCl.vol
## Output
std <- data.frame(Rstd, Rblk, Vstd, Nstd, E, Vreg, DOreg)
write.table(std, file = "./data/winkler_standardization_29sept2015.csv", quote = F, row.names = F, sep = ",")
sod <- read.delim("./data/leached_litter_sod_24sept2015.csv", header = T, sep = ",")
std.24sept2015 <- read.delim("./data/winkler_standardization_24sept2015.csv", header = T,  sep = ",")
std.25sept2015 <- read.delim("./data/winkler_standardization_25sept2015.csv", header = T,  sep = ",")
vial <- read.delim("./data/vial_volume_summer_2014.csv", header = T,  sep = ",")
treat <- read.delim("./data/leached_litter_treatments_fall2015.csv", header = T, sep = ",")
sod <- merge(sod, treat, by.x = "bod", by.y = "bod")
# DO Calculations
## Add vial vial volumes to the sod data.frame for T0
sodT0 <- merge(sod, vial, by.x = "vialT0", by.y = "vial")
DOvol.T0 <- (((sod$RmeasT0 - std.22sept2015$Rblk) * std.22sept2015$Vstd * std.22sept2015$Nstd * std.22sept2015$E) / ((std.22sept2015$Rstd - std.22sept2015$Rblk) * (sodT0$vol - std.22sept2015$Vreg))) - std.22sept2015$DOreg
DOvol.T0 <- (((sod$RmeasT0 - std.24sept2015$Rblk) * std.24sept2015$Vstd * std.24sept2015$Nstd * std.24sept2015$E) / ((std.24sept2015$Rstd - std.24sept2015$Rblk) * (sodT0$vol - std.24sept2015$Vreg))) - std.24sept2015$DOreg
sodTF <- merge(sod, vial, by.x = "vialTF", by.y = "vial")
DOvol.TF <- (((sod$RmeasTF - std.25sept2015$Rblk) * std.25sept2015$Vstd * std.25sept2015$Nstd * std.25sept2015$E) / ((std.25sept2015$Rstd - std.25sept2015$Rblk) * (sodTF$vol - std.25sept2015$Vreg))) - std.25sept2015$DOreg
repl <- merge(repl, vial, by.x = "vial", by.y = "vial")
R <- 0.08205746 # ideal gas constant in (L atm)/(mol K)
T <- sod$temp + 273.15 # convert C to K
P <- sod$pressure * 0.03342 # convert in Hg to atm
DOmmol.T0 <- (P * DOvol.T0) / (R * T)
DOmmol.TF <- (P * DOvol.TF) / (R * T)
DO.conc <- data.frame(sod$bod, sod$treat, DOmmol.T0, DOmmol.TF)
write.table(DO.conc, "./data/leached_litter_DOconc_24sept2015.csv", row.names = F, quote = F, sep = ",")
ll.do.24sept <- read.table("./data/leached_litter_DOconc_24sept2015.csv", header = T, sep = ",")
ll.do.29oct <- read.table("./data/leached_litter_DOconc_29oct2015.csv", header = T, sep = ",")
sod <- read.delim("./data/leached_litter_sod_29oct2015.csv", header = T, sep = ",")
std.29sept2015 <- read.delim("./data/winkler_standardization_29sept2015.csv", header = T,  sep = ",")
vial <- read.delim("./data/vial_volume_summer_2014.csv", header = T,  sep = ",")
treat <- read.delim("./data/leached_litter_treatments_fall2015.csv", header = T, sep = ",")
sod <- rbind(ll.do.22sept, ll.do.24sept, ll.do.1oct, ll.do.8oct, ll.do.22oct)
ll.do.22sept <- read.table("./data/leached_litter_DOconc_22sept2015.csv", header = T, sep = ",")
ll.do.24sept <- read.table("./data/leached_litter_DOconc_24sept2015.csv", header = T, sep = ",")
ll.do.1oct <- read.table("./data/leached_litter_DOconc_01oct2015.csv", header = T, sep = ",")
ll.do.8oct <- read.table("./data/leached_litter_DOconc_08oct2015.csv", header = T, sep = ",")
ll.do.22oct <- read.table("./data/leached_litter_DOconc_22oct2015.csv", header = T, sep = ",")
### Combine into a single dataset
sod <- rbind(ll.do.22sept, ll.do.24sept, ll.do.1oct, ll.do.8oct, ll.do.22oct)
date <- c(rep("2016-09-22", 12), rep("2016-09-24", 12), rep("2016-10-01", 12), rep("2016-10-08", 12), rep("2016-10-22", 12))
days.elap <- 2016-09-21 - date
days.elap <- as.postix(2016-09-21) - as.postix(date)
days.elap <- as.posix(2016-09-21) - as.posix(date)
days.elap <- as.Date(2016-09-21) - as.Date(date)
days.elap <- as.Date("2016-09-21") - as.Date(date)
days.elap <- difftime("2016-09-21", date)
days.elap <- difftime("2016-09-21", as.Date(date))
days.elap <- difftime(as.Date("2016-09-21"), as.Date(date))
days.elap <- difftime(as.Date("2016-09-21"), as.Date("2016-09-22"))
days.elap <- difftime(as.Date("2016-09-21") - as.Date("2016-09-22"))
days.elap <- diffdate(as.Date("2016-09-21"), as.Date("2016-09-22"))
diffdate(as.Date("2016-09-21"), as.Date("2016-09-22"))
difftime(as.Date("2016-09-21"), as.Date("2016-09-22"))
days.elap <- as.numeric(difftime(as.Date("2016-09-21"), as.Date(date))
)
days.elap <- as.numeric(as.Date(date), difftime(as.Date("2016-09-21") ))
days.elap <- as.numeric(difftime(as.Date(date), as.Date("2016-09-21") ))
unique(days.elap)
sod <- data.frame(date, days.elap, sod)
par(las = 1, mar = c(6, 6, 3, 3))
plot(SOD ~ jitter(days.elap, 0.7), data = sod, subset = treatment == "LS", ylim = c(0, 2.5), xlim = c(0, 21), xlab = "Days of Incubation", ylab = expression(paste("SOD (mmol ", O[2], " m"^{-2}, " h"^{-1}, ")")), pch = 19, cex.axis = 1.2, cex.lab = 1.5, cex = 2)
points(SOD ~ jitter(days.elap, 0.7), data = sod, subset = treatment == "S", pch = 1, cex = 2)
legend(12, 2.5, c("Leaf Litter  ", "No Leaf Litter  "), pch = c(19, 1), cex = 1)
dev.copy(jpeg, "./output/plots/leached_litter_SOD_by_days.jpg")
dev.off()
plot(DOmmol.T0 ~ days.elap)
plot(DOmmol.T0 ~ days.elap, data = sod)
tapply(sod$DOmmol.T0, sod$days.elap, summary)
tapply(sod$DOmmol.TF, sod$days.elap, summary)
unique(days.elap)
